module tamagotchi_top(
    input wire clk,                // Señal de reloj
    input wire alimentar,          // Botón para alimentar
    input wire jugar,              // Botón para jugar
    input wire reset,              // Botón de reset
    input wire test,               // Botón de test
    input wire sensor_ultrasonido, // Sensor de ultrasonido
    input wire sensor_ruido,       // Sensor de ruido
    output wire [6:0] display_hambre,    // Salida del display 7 segmentos para hambre
    output wire [6:0] display_diversion, // Salida del display 7 segmentos para diversión
    output wire [6:0] display_estado     // Salida del display 7 segmentos para estado
);

    // Señales internas
    wire [2:0] nivel_hambre;
    wire [2:0] nivel_diversion;
    wire reset_debounced;
    wire test_debounced;
    wire [2:0] estado_tamagotchi;

    // Instancia del módulo `niveles`
    niveles niveles_inst (
        .clk(clk),
        .alimentar(alimentar),
        .jugar(jugar),
        .reset(reset),
        .test(test),
        .nivel_hambre(nivel_hambre),
        .nivel_diversion(nivel_diversion),
        .reset_debounced(reset_debounced),
        .test_debounced(test_debounced)
    );

    // Instancia del módulo `fms_estado`
    fms_estado fms_estado_inst (
        .clk(clk),
        .reset_n(~reset_debounced), // reset negado
        .test_n(~test_debounced),   // test negado
        .hambre(nivel_hambre),
        .diversion(nivel_diversion),
        .sensor_ultrasonido(sensor_ultrasonido),
        .sensor_ruido(sensor_ruido),
        .estado(estado_tamagotchi)
    );

    // Instancia del módulo para controlar los displays de 7 segmentos
    display_7_segmentos display_inst (
        .nivel_hambre(nivel_hambre),
        .nivel_diversion(nivel_diversion),
        .estado(estado_tamagotchi),
        .display_hambre(display_hambre),
        .display_diversion(display_diversion),
        .display_estado(display_estado)
    );

endmodule
